@model MySocial.WebUI.ViewModels.PostViewModel
@{
    ViewData["Title"] = "Home Page";
}

<div class="text-center">
    <section class="my-1">
        <form class="align-items-end" asp-action="AddPost" asp-controller="Post">
                <input type="text" asp-for="Content" class="form-control rounded-2 shadow-sm py-3" id="search" placeholder="What's hapenning?"/>
                <div class="d-flex justify-content-end mt-3">
                    <button type="submit" class="btn btn-primary px-3 rounded-2">Post</button>
                </div>
            </form>
    </section>
	<section class="mt-3">
		@foreach (var post in Model.Posts)
		{
			<div class="card my-3">
				<div class="d-flex flex-row mb-3 align-items-center mx-3 mt-2">
					<img src="@post.user.ProfilePictureUrl" alt="Profile Picture" class="rounded-circle me-2" width="50" height="50"/>
					<h5>@post.user.UserName</h5>
				</div>
				<div class="mb-3 px-3">
					<div class="text-lg-start">
						<p >@post.post.Content</p>
						<div class="my-3 d-flex flex-row gap-2">
							<form asp-action="LikePost" asp-controller="Like">
								<input type="hidden" name="postId" value="@post.post.Id" />
								<input type="hidden" name="userId" value="@post.user.Id" />
								<button type="submit" class="border-0 bg-transparent">
									<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="@(post.isLiked ? "red" : "#e3e3e3")">
										<path d="m480-120-58-52q-101-91-167-157T150-447.5Q111-500 95.5-544T80-634q0-94 63-157t157-63q52 0 99 22t81 62q34-40 81-62t99-22q94 0 157 63t63 157q0 46-15.5 90T810-447.5Q771-395 705-329T538-172l-58 52Z" />
									</svg>
								</button>
							</form>
							<p>
								@post.likes
							</p>
						</div>
						<p ><small class="text-muted">@post.post.CreatedAt.ToString("g")</small></p>
					</div>
				</div>
			</div>
		}
	</section>
</div>
